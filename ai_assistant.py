"""
AI Assistant –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
–£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏)
"""
import random
from typing import Dict, List

class AIAssistant:
    """
    –ü—Ä–æ—Å—Ç–æ–π AI –ø–æ–º–æ—â–Ω–∏–∫ —Å –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏
    –°–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç –∂–∏–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è
    """
    
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤"""
        
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
        self.greetings = [
            "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –≤—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞. üëã",
            "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? üòä",
            "–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–π –ø—Ä–æ–±–ª–µ–º–µ.",
            "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫."
        ]
        
        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        self.acknowledgments = {
            "name": [
                "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, {}! üòä",
                "–û—Ç–ª–∏—á–Ω–æ, {}! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º.",
                "–ó–∞–ø–∏—Å–∞–ª, {}!",
                "–°–ø–∞—Å–∏–±–æ, {}!"
            ],
            "phone": [
                "–ù–æ–º–µ—Ä –ø—Ä–∏–Ω—è—Ç! üì±",
                "–û—Ç–ª–∏—á–Ω–æ! –ú–∞—Å—Ç–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –ø–æ —ç—Ç–æ–º—É –Ω–æ–º–µ—Ä—É.",
                "–ó–∞–ø–∏—Å–∞–ª —Ç–µ–ª–µ—Ñ–æ–Ω! ‚úÖ",
                "–•–æ—Ä–æ—à–æ, –∑–∞–ø–æ–º–Ω–∏–ª! üìû"
            ],
            "category": [
                "–ü–æ–Ω—è–ª, {} - —ç—Ç–æ –≤–∞–∂–Ω–æ! üîß",
                "–•–æ—Ä–æ—à–æ, –Ω–∞–π–¥—ë–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ {}! üë®‚Äçüîß",
                "{} - –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!",
                "–ó–∞–ø–∏—Å–∞–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é: {}"
            ],
            "problem": [
                "–ü–æ–Ω—è–ª –ø—Ä–æ–±–ª–µ–º—É! –°–µ–π—á–∞—Å –æ—Ü–µ–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å... ü§î",
                "–Ø—Å–Ω–æ. –ü–æ—Ö–æ–∂–µ –Ω–∞ —Ç–∏–ø–∏—á–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é. ‚úÖ",
                "–ó–∞–ø–∏—Å–∞–ª! –≠—Ç–æ —Ä–µ—à–∞–µ–º–æ! üí™",
                "–ü–æ–Ω—è—Ç–Ω–æ! –°–µ–π—á–∞—Å –ø–æ–¥–±–µ—Ä—É –º–∞—Å—Ç–µ—Ä–∞."
            ],
            "address": [
                "–ê–¥—Ä–µ—Å –ø—Ä–∏–Ω—è—Ç! üìç",
                "–û—Ç–ª–∏—á–Ω–æ! –ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É.",
                "–ó–∞–ø–∏—Å–∞–ª –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ! ‚úÖ",
                "–•–æ—Ä–æ—à–æ, –∑–Ω–∞—é –≥–¥–µ —ç—Ç–æ! üó∫Ô∏è"
            ]
        }
        
        # –û—Ü–µ–Ω–∫–∞ —Ü–µ–Ω—ã
        self.price_estimates = [
            "–ü–æ –º–æ–∏–º —Ä–∞—Å—á—ë—Ç–∞–º, —Ä–∞–±–æ—Ç–∞ –æ–±–æ–π–¥—ë—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ {} ‚ÇΩ.",
            "–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞: {} ‚ÇΩ.",
            "–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: {} ‚ÇΩ.",
            "–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Ü–µ–Ω–∞ —Ä–∞–±–æ—Ç: {} ‚ÇΩ."
        ]
        
        # –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–∞
        self.master_search = [
            "üîç –ò—â—É –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞...",
            "‚è≥ –ú–∏–Ω—É—Ç–∫—É, –ø–æ–¥–±–∏—Ä–∞—é –º–∞—Å—Ç–µ—Ä–∞...",
            "ü§î –ü—Ä–æ–≤–µ—Ä—è—é –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤...",
            "‚öôÔ∏è –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –±–∞–∑—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤..."
        ]
        
        # –ú–∞—Å—Ç–µ—Ä –Ω–∞–π–¥–µ–Ω
        self.master_found = [
            "‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ú–∞—Å—Ç–µ—Ä {} –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –∑–∞–∫–∞–∑!",
            "üéâ –ù–∞—à—ë–ª —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞! –ú–∞—Å—Ç–µ—Ä {} —É–∂–µ –≤ –∫—É—Ä—Å–µ.",
            "üë®‚Äçüîß –ú–∞—Å—Ç–µ—Ä {} –ø—Ä–∏–Ω—è–ª –∑–∞–∫–∞–∑!",
            "‚úÖ {} –≤—ã–ø–æ–ª–Ω–∏—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É!"
        ]
        
        # –ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω
        self.master_not_found = [
            "üîç –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—Å–µ –º–∞—Å—Ç–µ—Ä–∞ —Å–µ–π—á–∞—Å –∑–∞–Ω—è—Ç—ã. –ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è!",
            "‚è∞ –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –∑–∞–Ω—è—Ç—ã. –û—Ç–ø—Ä–∞–≤–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫—Ç–æ-—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω.",
            "üì≤ –í—Å–µ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö. –Ø –æ—Ç–ø—Ä–∞–≤–ª—é –≤–∞–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è!",
            "‚è≥ –°–µ–π—á–∞—Å –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. –ù–æ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–π–¥—ë–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞!"
        ]
        
        # –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
        self.thanks = [
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üòä",
            "–û–±—Ä–∞—â–∞–π—Ç–µ—Å—å! üëã",
            "–†–∞–¥ –±—ã–ª –ø–æ–º–æ—á—å! ‚ú®",
            "–í—Å–µ–≥–¥–∞ –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º! ü§ù"
        ]
        
        # –û—à–∏–±–∫–∏ –≤–≤–æ–¥–∞
        self.validation_errors = {
            "phone": [
                "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: +79001234567",
                "üì± –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (+7...)",
                "‚ùå –ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å +7 –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å 11 —Ü–∏—Ñ—Ä.",
                "üìû –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç: +79001234567"
            ],
            "problem_short": [
                "‚ùå –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ! –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ.",
                "üìù –ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?",
                "‚ùå –û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –¥–µ—Ç–∞–ª—å–Ω–µ–µ (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤).",
                "ü§î –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–æ–±–ª–µ–º–µ!"
            ],
            "address_short": [
                "‚ùå –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞).",
                "üìç –ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –≤—ã–µ–∑–¥–∞ –º–∞—Å—Ç–µ—Ä–∞!",
                "‚ùå –ê–¥—Ä–µ—Å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π! –£–∫–∞–∂–∏—Ç–µ —É–ª–∏—Ü—É –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞.",
                "üè† –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å."
            ]
        }
        
        # –£–º–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        self.category_tips = {
            "electrical": [
                "‚ö° –≠–ª–µ–∫—Ç—Ä–∏–∫–∞ - –¥–µ–ª–æ —Å–µ—Ä—å—ë–∑–Ω–æ–µ! –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å —á–∏–Ω–∏—Ç—å —Å–∞–º–∏!",
                "üîå –í–∞–∂–Ω–æ! –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –ø—Ä–æ–≤–æ–¥–∫—É!",
                "‚ö° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ! –î–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—É.",
                "üîå –•–æ—Ä–æ—à–æ —á—Ç–æ –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å! –≠–ª–µ–∫—Ç—Ä–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –æ–ø—ã—Ç–∞."
            ],
            "plumbing": [
                "üö∞ –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å, –Ω–æ –ª—É—á—à–µ –Ω–µ –∑–∞—Ç—è–≥–∏–≤–∞—Ç—å!",
                "üíß –í–∞–∂–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ç–µ—á–∫—É –±—ã—Å—Ç—Ä–æ!",
                "üöø –û–ø—ã—Ç–Ω—ã–π —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –∑–∞ —á–∞—Å!",
                "üí¶ –ß–µ–º –±—ã—Å—Ç—Ä–µ–µ –º–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç - —Ç–µ–º –º–µ–Ω—å—à–µ —Ö–ª–æ–ø–æ—Ç!"
            ],
            "appliance": [
                "üîß –¢–µ—Ö–Ω–∏–∫–∞ –ª–æ–º–∞–µ—Ç—Å—è –≤ —Å–∞–º—ã–π –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–æ–º–µ–Ω—Ç!",
                "üîå –†–∞–∑–±–µ—Ä—ë–º—Å—è —Å –≤–∞—à–µ–π —Ç–µ—Ö–Ω–∏–∫–æ–π!",
                "‚öôÔ∏è –°–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–µ—Ö–Ω–∏–∫—É –ª—É—á—à–µ –¥–æ–≤–µ—Ä–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É!",
                "üîß –ú–∞—Å—Ç–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ—Ç –∏ –ø–æ—á–∏–Ω–∏—Ç!"
            ],
            "general": [
                "üî® –ë—ã—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã - –Ω–∞—à–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è!",
                "üõ†Ô∏è –†–µ—à–∏–º –≤–∞—à—É –∑–∞–¥–∞—á—É –±—ã—Å—Ç—Ä–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ!",
                "üîß –õ—é–±—ã–µ –º–µ–ª–∫–∏–µ —Ä–∞–±–æ—Ç—ã - –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞!",
                "üè† –î–æ–º–∞—à–Ω–∏–µ –¥–µ–ª–∞ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è!"
            ]
        }
    
    def get_greeting(self) -> str:
        """–°–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"""
        return random.choice(self.greetings)
    
    def get_acknowledgment(self, field: str, value: str = "") -> str:
        """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"""
        templates = self.acknowledgments.get(field, ["–ü—Ä–∏–Ω—è—Ç–æ!"])
        template = random.choice(templates)
        return template.format(value) if "{}" in template else template
    
    def get_price_estimate(self, price: float) -> str:
        """–û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏"""
        template = random.choice(self.price_estimates)
        return template.format(f"{price:,.0f}".replace(',', ' '))
    
    def get_master_search_message(self) -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–∏—Å–∫–µ –º–∞—Å—Ç–µ—Ä–∞"""
        return random.choice(self.master_search)
    
    def get_master_found_message(self, master_name: str) -> str:
        """–ú–∞—Å—Ç–µ—Ä –Ω–∞–π–¥–µ–Ω"""
        template = random.choice(self.master_found)
        return template.format(master_name)
    
    def get_master_not_found_message(self) -> str:
        """–ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"""
        return random.choice(self.master_not_found)
    
    def get_thanks(self) -> str:
        """–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å"""
        return random.choice(self.thanks)
    
    def get_validation_error(self, error_type: str) -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤–≤–æ–¥–∞"""
        errors = self.validation_errors.get(error_type, ["‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥!"])
        return random.choice(errors)
    
    def get_category_tip(self, category: str) -> str:
        """–°–æ–≤–µ—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
        tips = self.category_tips.get(category, [])
        return random.choice(tips) if tips else ""
    
    def generate_summary(self, data: Dict) -> str:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ä–µ–∑—é–º–µ –∑–∞—è–≤–∫–∏
        (–∫–∞–∫ –∂–∏–≤–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥—ã—Ç–æ–∂–∏–≤–∞–µ—Ç)
        """
        name = data.get('name', '–ö–ª–∏–µ–Ω—Ç')
        category = data.get('category_name', data.get('category', ''))
        problem = data.get('problem', '')
        address = data.get('address', '')
        price = data.get('estimated_price', 0)
        
        summary = (
            f"üìã <b>–ò—Ç–∞–∫, {name}, –¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º:</b>\n\n"
            f"üîß <b>–£—Å–ª—É–≥–∞:</b> {category}\n"
            f"üìù <b>–ü—Ä–æ–±–ª–µ–º–∞:</b> {problem}\n"
            f"üìç <b>–ê–¥—Ä–µ—Å:</b> {address}\n"
            f"üí∞ <b>–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</b> {price:,.0f} ‚ÇΩ\n\n"
            f"–í—Å—ë –≤–µ—Ä–Ω–æ? ü§î"
        )
        
        return summary
    
    def generate_confirmation(self, data: Dict) -> str:
        """
        –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å —ç–º–æ—Ü–∏–µ–π
        """
        job_id = data.get('job_id', 0)
        master_assigned = data.get('master_assigned', False)
        master_name = data.get('master_name', '—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç')
        
        if master_assigned:
            message = (
                f"‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ! –ó–∞—è–≤–∫–∞ #{job_id} —Å–æ–∑–¥–∞–Ω–∞!</b>\n\n"
                f"üë®‚Äçüîß –ú–∞—Å—Ç–µ—Ä <b>{master_name}</b> —É–∂–µ –ø–æ–ª—É—á–∏–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.\n\n"
                f"üì± –û–∂–∏–¥–∞–π—Ç–µ –∑–≤–æ–Ω–∫–∞!\n\n"
                f"–°–ø–∞—Å–∏–±–æ —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—Å! ü§ù"
            )
        else:
            message = (
                f"‚úÖ <b>–ó–∞—è–≤–∫–∞ #{job_id} –ø—Ä–∏–Ω—è—Ç–∞!</b>\n\n"
                f"üîç –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞...\n"
                f"üì≤ –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø—Ä–∏–º–µ—Ç –∑–∞–∫–∞–∑ - –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!\n\n"
                f"–û–±—ã—á–Ω–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 5-15 –º–∏–Ω—É—Ç. ‚è∞"
            )
        
        return message

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä AI –ø–æ–º–æ—â–Ω–∏–∫–∞
ai = AIAssistant()
